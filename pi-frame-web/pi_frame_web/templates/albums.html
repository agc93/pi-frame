{% extends "layout.html" %}

{% block content %}
<h2>Album List</h2>
<table class="table table-striped table-hover">
	<thead>
		<tr>
			<th>Name</th>
			<th>Location</th>
			<th>Files</th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		{% for album in albums %}
		<tr>
			<td>{{ album.Name }}</td>
			<td>{{ album.Path }}</td>
			<td>{{ album.Count }}</td>
			<td><a class="btn btn-sm btn-danger btn-delete"  data-target="{{ album.Name }}" href="#">Delete</a></td>
		</tr>
		{% endfor %}
	</tbody>
</table>

<a class="btn btn-lg btn-primary" href="{{ url_for('input') }}">Create New</a>
{% endblock %}

{% block scripts %}
<script type="text/javascript" >
	function deleteAlbum(locName) {
		$.ajax({
			type: "DELETE",
			url: "{{ url_for('deleteLocation') }}",
			data: {"name": locName },
			success: function(msg){
				location.reload(true)
			}
		});
	}
	
	$(document).ready(function() {
		$('.btn-delete').click(function() {
			deleteAlbum($(this).attr('data-target'));
		});
	});
</script>
{% endblock %}
